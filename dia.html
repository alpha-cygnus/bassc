<html>
<head>
<script src="lib/jquery-2.1.1.js"></script>
<style>
body {
	margin: 0px;
}
</style>
<script>
"use strict";

var klaz = location.search.substr(1);
var bcMeta = parent.BC.meta.data;
var dot = bcMeta[klaz].getDot();
//console.log(dot);
$(() => {
	setTimeout(() => {
		var res = Viz(dot);
		$('#vis').html(res);
		$('#pre').html(dot);
		setTimeout(() => {
			parent.$('#ifrVis').height($('#vis').height() + 10);
			$('g.node').click((e) => {
				var id = $(e.target).parents('g.node')[0].id;
				//console.log();
				var t = bcMeta[klaz].nodes[id].type.name;
				location = '?' + t;
			})
		});
	}, 10);
})
</script>
</head>
<body>
<!--pre id="pre">Where am I?</pre-->
<div id="vis">Loading...</div>
<script src="lib/viz.js"></script>
</body>
</html>