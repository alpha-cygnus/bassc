<html>
<head>
<script src="lib/jquery-2.1.1.js"></script>
<script src="lib/viz.js"></script>
<style>
body {
	margin: 0px;
}
</style>
<script>
"use strict";

var klaz = location.search.substr(1);
var bcMeta = parent.BC.meta.data;
var dot = bcMeta[klaz].getDot();
//console.log(dot);
$(() => {
	var res = Viz(dot);
	$('#vis').html(res);
	$('#pre').html(dot);
	setTimeout(() => {
		parent.$('#ifrVis').height($('#vis').height() + 10);
		$('g.node').click((e) => {
			var id = $(e.target).parents('g.node')[0].id;
			//console.log();
			var t = parent.bcMeta[klaz].nodes[id].type;
			location = '?' + t;
		})
	}, 10);
})
</script>
</head>
<body>
<!--pre id="pre">Where am I?</pre-->
<div id="vis"></div>
</body>
</html>